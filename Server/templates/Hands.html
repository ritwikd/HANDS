

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>H.A.N.D.S.</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.min.css"  crossorigin="anonymous" />
    <link rel="stylesheet" href="https://unpkg.com/accordion-js@2.8.0/dist/accordion.min.css"  crossorigin="anonymous" />

    <link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='styles/hands.css') }}">
</head>
<body>
<div class="title-card content-card">
    <h1 class="title-main">H.A.N.D.S.</h1>
    <h3 class="title-sub">Helpful Assistant Not Drawing Suspicion</h3>
</div>
<div class="body-card content-card">
    <div class="multicard card-table">
        <div class="cards-container">
            <div class="dropdown" id="table-first-wrapper">
                <button class="btn btn-secondary dropdown-toggle" type="button"data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <img class="display-card" id="table-card-1" src="{{ url_for('static',filename='assets/cards/back.png')}}"></img>
                </button>
                <div class="dropdown-menu card-dropdown hand-dropdown" id="table-first-card" aria-labelledby="dropdownMenuButton">
                </div>
            </div>
            <div class="dropdown" id="table-second-wrapper">
                <button class="btn btn-secondary dropdown-toggle" type="button"data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <img class="display-card" id="table-card-2" src="{{ url_for('static',filename='assets/cards/back.png')}}"></img>
                </button>
                <div class="dropdown-menu card-dropdown hand-dropdown" id="table-second-card" aria-labelledby="dropdownMenuButton">
                </div>
            </div>
            <div class="dropdown" id="table-third-wrapper">
                <button class="btn btn-secondary dropdown-toggle" type="button"data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <img class="display-card" id="table-card-3" src="{{ url_for('static',filename='assets/cards/back.png')}}"></img>
                </button>
                <div class="dropdown-menu card-dropdown hand-dropdown" id="table-third-card" aria-labelledby="dropdownMenuButton">
                </div>
            </div>
            <div class="dropdown" id="table-fourth-wrapper">
                <button class="btn btn-secondary dropdown-toggle" type="button"data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <img class="display-card" id="table-card-4" src="{{ url_for('static',filename='assets/cards/back.png')}}"></img>
                </button>
                <div class="dropdown-menu card-dropdown hand-dropdown" id="table-fourth-card" aria-labelledby="dropdownMenuButton">
                </div>
            </div>
            <div class="dropdown" id="table-fifth-wrapper">
                <button class="btn btn-secondary dropdown-toggle" type="button"data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <img class="display-card" id="table-card-5" src="{{ url_for('static',filename='assets/cards/back.png')}}"></img>
                </button>
                <div class="dropdown-menu card-dropdown hand-dropdown" id="table-fifth-card" aria-labelledby="dropdownMenuButton">
                </div>
            </div>
            <h3>Table</h3>
        </div>
    </div>
    <div class="multicard card-hand">
        <div class="cards-container">
            <div class="dropdown" id="hand-first-wrapper">
                <button class="btn btn-secondary dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <img class="display-card" id="hand-card-1" src="{{ url_for('static',filename='assets/cards/back.png')}}"></img>
                </button>
                <div class="dropdown-menu card-dropdown hand-dropdown"  id="hand-first-card" aria-labelledby="dropdownMenuButton">
                </div>
            </div>
            <div class="dropdown" id="hand-second-wrapper">
                <button class="btn btn-secondary dropdown-toggle" type="button"data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <img class="display-card" id="hand-card-2" src="{{ url_for('static',filename='assets/cards/back.png')}}"></img>
                </button>
                <div class="dropdown-menu card-dropdown hand-dropdown" id="hand-second-card" aria-labelledby="dropdownMenuButton">
                </div>
            </div>
            <h3>Hand</h3>
        </div>
    </div>
    <div class="compute">
        <div class="compute-button-wrapper">
            <button type="button" class="btn btn-primary btn-disabled compute-button results-button">Analyze</button>
            <button type="button" class="btn btn-secondary btn-disabled flop-button results-button">Flop</button>
            <button type="button" class="btn btn-secondary btn-disabled turn-button results-button">Turn</button>
            <button type="button" class="btn btn-secondary btn-disabled river-button results-button">River</button>
            <button type="button" class="btn btn-danger btn-disabled reset-button results-button">Reset</button>
        </div>
        <div class="compute-results-wrapper">
            <div class="compute-results-heading">

            </div>
            <div class="compute-results">
                <div class="results-left results-column"></div>
                <div class="results-right results-column"></div>
            </div>
           <div class="showdown-results">
               <div class="showdown-title"></div>
               <div class="showdown-cards"></div>
            </div>
        </div>
    </div>
</div>
</body>
<script src="https://code.jquery.com/jquery-3.4.1.min.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mouse0270-bootstrap-notify/3.1.7/bootstrap-notify.min.js" crossorigin="anonymous"></script>
<script src="https://unpkg.com/accordion-js@2.8.0/dist/accordion.min.js" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/json2html/1.4.0/json2html.min.js"></script>



<script>
    // Game Management System - All in JS
    // ♠ ♦ ♥ ♣

    let probabilities = {}

    faces = {2: '2 ', 3: '3 ', 4: '4 ', 5: '5 ',
        6: '6 ', 7: '7 ', 8: '8 ', 9: '9 ', 10: '10',
        11: 'J ', 12: 'Q ', 13: 'K ', 14: 'A '};

    face_string = {2: 'Two', 3: 'Three', 4: 'Four', 5: 'Five',
        6: 'Six', 7: "Seven", 8: 'Eight', 9: 'Nine', 10: 'Ten',
        11: 'Jack', 12: 'Queen', 13: 'King', 14: 'Ace'};

    suits = ['♠', '♦', '♥', '♣'];

    suit_char_to_string = {
        '♠' : 'spades',
        '♦' : 'diamonds',
        '♥' : 'hearts',
        '♣' : 'clubs'
    };

    face_num_to_string = {
        11 : 'jack',
        12 : 'queen',
        13 : 'king',
        14 : 'ace'
    };

    let deck = [];

    $(".compute").css("min-height", $(".card-hand").height() + 30);

    let generateDeck = function () {
        let tempDeck = [];
        for (face in faces) {
            for (suit of suits) {
                tempDeck.push([parseInt(face), suit]);
            }
        }
        return tempDeck;
    };

    deck = generateDeck();

    let populateDropdown = function(element) {
        for (let i = 0; i < deck.length; i++){
            let card_raw = deck[i];
            let card_suit = suit_char_to_string[card_raw[1]];
            let card_num = card_raw[0];
            if (card_num > 10) {
                card_num = face_num_to_string[card_num];
            } else {
                card_num = card_num.toString();
            }
            let image_file = card_num + '_of_' + card_suit + '.png';
            let link_item = document.createElement("a");
            link_item.className = 'dropdown-item';
            let card_picture = document.createElement('img');
            card_picture.src = "{{ url_for('static',filename='assets/cards/')}}" + image_file;
            card_picture.className = 'dropdown-render-card';
            link_item.appendChild(card_picture);
            link_item.href = "#";
            link_item.setAttribute('data-card', JSON.stringify(card_raw));
            element.appendChild(link_item);
        }
    };

    let emptyDropdown = function(element) {
        while (element.firstChild) {
            element.removeChild(element.firstChild);
        }
    };

    let refreshDropdown = function(element) {
        emptyDropdown(element);
        populateDropdown(element);
    };

    let refreshAll = function() {
        refreshDropdown(document.getElementById("hand-first-card"));
        refreshDropdown(document.getElementById("hand-second-card"));
        refreshDropdown(document.getElementById('table-first-card'));
        refreshDropdown(document.getElementById('table-second-card'));
        refreshDropdown(document.getElementById('table-third-card'));
        refreshDropdown(document.getElementById('table-fourth-card'));
        refreshDropdown(document.getElementById('table-fifth-card'));

         if (selectedCards() == 0) {
            $('.compute-button').prop('disabled', true);
            $('.reset-button').prop('disabled', true);
        } else {
            $('.compute-button').prop('disabled', false);
            $('.reset-button').prop('disabled', false);
        }
    };


    let currentCards = [null, null, null, null, null, null, null]


    populateDropdown(document.getElementById("hand-first-card"));
    populateDropdown(document.getElementById("hand-second-card"));
    populateDropdown(document.getElementById('table-first-card'));
    populateDropdown(document.getElementById('table-second-card'));
    populateDropdown(document.getElementById('table-third-card'));
    populateDropdown(document.getElementById('table-fourth-card'));
    populateDropdown(document.getElementById('table-fifth-card'));

    let resetGame = function() {
        currentCards = [null, null, null, null, null, null, null];
        $('#hand-card-1').attr('src', '../static/assets/cards/back.png');
        $('#hand-card-2').attr('src', '../static/assets/cards/back.png');
        $('#table-card-1').attr('src', '../static/assets/cards/back.png');
        $('#table-card-2').attr('src', '../static/assets/cards/back.png');
        $('#table-card-3').attr('src', '../static/assets/cards/back.png');
        $('#table-card-4').attr('src', '../static/assets/cards/back.png');
        $('#table-card-5').attr('src', '../static/assets/cards/back.png');

        $('.flop-button').prop('disabled', true);
        $('.turn-button').prop('disabled', true);
        $('.river-button').prop('disabled', true);

        $('.compute-results-heading').html('');
        $('.results-left').html('');
        $('.results-right').html('');

        $('.showdown-cards').html('');
        $('.showdown-title').html('');

        deck = generateDeck();
        refreshAll();

    };

    $('#hand-first-card').on('click', 'a', function(){
        let card_raw = $(this).data('card');
        let card_suit = suit_char_to_string[card_raw[1]];
        let card_num = card_raw[0];
        if (card_num > 10) {
            card_num = face_num_to_string[card_num];
        } else {
            card_num = card_num.toString();
        }
        let image_file = '../static/assets/cards/' + card_num + '_of_' + card_suit + '.png';
        $('#hand-card-1').attr('src', image_file);
        currentCards[0] = card_raw;

        if (currentCards[1] != null) {
            if (currentCards[1].toString() == card_raw.toString()) {
                $('#hand-card-2').attr('src', '../static/assets/cards/back.png');
                currentCards[1] = null;
            }
        }
        if (currentCards[2] != null) {
            if (currentCards[2].toString() == card_raw.toString()) {
                $('#table-card-1').attr('src', '../static/assets/cards/back.png');
                currentCards[2] = null;
            }
        }
        if (currentCards[3] != null) {
            if (currentCards[3].toString() == card_raw.toString()) {
                $('#table-card-2').attr('src', '../static/assets/cards/back.png');
                currentCards[3] = null;
            }
        }
        if (currentCards[4] != null) {
            if (currentCards[4].toString() == card_raw.toString()) {
                $('#table-card-3').attr('src', '../static/assets/cards/back.png');
                currentCards[4] = null;
            }
        }
        if (currentCards[5] != null) {
            if (currentCards[5].toString() == card_raw.toString()) {
                $('#table-card-4').attr('src', '../static/assets/cards/back.png');
                currentCards[5] = null;
            }
        }
        if (currentCards[6] != null) {
            if (currentCards[6].toString() == card_raw.toString()) {
                $('#table-card-5').attr('src', '../static/assets/cards/back.png');
                currentCards[6] = null;
            }
        }

        deck = generateDeck();
        deck = deck.filter(function(card) {
            return currentCards.map(String).indexOf(card.toString()) == -1;
        });

        refreshAll();


    });

    $('#hand-second-card').on('click', 'a', function(){
        let card_raw = $(this).data('card');
        let card_suit = suit_char_to_string[card_raw[1]];
        let card_num = card_raw[0];
        if (card_num > 10) {
            card_num = face_num_to_string[card_num];
        } else {
            card_num = card_num.toString();
        }
        let image_file = '../static/assets/cards/' + card_num + '_of_' + card_suit + '.png';
        $('#hand-card-2').attr('src', image_file);
        currentCards[1] = card_raw;
        if (currentCards[0] != null) {
            if (currentCards[0].toString() == card_raw.toString()) {
                $('#hand-card-1').attr('src', '../static/assets/cards/back.png');
                currentCards[0] = null;
            }
        }
        if (currentCards[2] != null) {
            if (currentCards[2].toString() == card_raw.toString()) {
                $('#table-card-1').attr('src', '../static/assets/cards/back.png');
                currentCards[2] = null;
            }
        }
        if (currentCards[3] != null) {
            if (currentCards[3].toString() == card_raw.toString()) {
                $('#table-card-2').attr('src', '../static/assets/cards/back.png');
                currentCards[3] = null;
            }
        }
        if (currentCards[4] != null) {
            if (currentCards[4].toString() == card_raw.toString()) {
                $('#table-card-3').attr('src', '../static/assets/cards/back.png');
                currentCards[4] = null;
            }
        }
        if (currentCards[5] != null) {
            if (currentCards[5].toString() == card_raw.toString()) {
                $('#table-card-4').attr('src', '../static/assets/cards/back.png');
                currentCards[5] = null;
            }
        }
        if (currentCards[6] != null) {
            if (currentCards[6].toString() == card_raw.toString()) {
                $('#table-card-5').attr('src', '../static/assets/cards/back.png');
                currentCards[6] = null;
            }
        }

        deck = generateDeck();
        deck = deck.filter(function(card) {
            return currentCards.map(String).indexOf(card.toString()) == -1;
        });
        refreshAll();

    });

    $('#table-first-card').on('click', 'a', function(){
        let card_raw = $(this).data('card');
        let card_suit = suit_char_to_string[card_raw[1]];
        let card_num = card_raw[0];
        if (card_num > 10) {
            card_num = face_num_to_string[card_num];
        } else {
            card_num = card_num.toString();
        }
        let image_file = '../static/assets/cards/' + card_num + '_of_' + card_suit + '.png';
        $('#table-card-1').attr('src', image_file);
        currentCards[2] = card_raw;
        if (currentCards[0] != null) {
            if (currentCards[0].toString() == card_raw.toString()) {
                $('#hand-card-1').attr('src', '../static/assets/cards/back.png');
                currentCards[0] = null;
            }
        }
        if (currentCards[1] != null) {
            if (currentCards[1].toString() == card_raw.toString()) {
                $('#hand-card-2').attr('src', '../static/assets/cards/back.png');
                currentCards[1] = null;
            }
        }
        if (currentCards[3] != null) {
            if (currentCards[3].toString() == card_raw.toString()) {
                $('#table-card-2').attr('src', '../static/assets/cards/back.png');
                currentCards[3] = null;
            }
        }
        if (currentCards[4] != null) {
            if (currentCards[4].toString() == card_raw.toString()) {
                $('#table-card-3').attr('src', '../static/assets/cards/back.png');
                currentCards[4] = null;
            }
        }
        if (currentCards[5] != null) {
            if (currentCards[5].toString() == card_raw.toString()) {
                $('#table-card-4').attr('src', '../static/assets/cards/back.png');
                currentCards[5] = null;
            }
        }
        if (currentCards[6] != null) {
            if (currentCards[6].toString() == card_raw.toString()) {
                $('#table-card-5').attr('src', '../static/assets/cards/back.png');
                currentCards[6] = null;
            }
        }

        deck = generateDeck();
        deck = deck.filter(function(card) {
            return currentCards.map(String).indexOf(card.toString()) == -1;
        });
        refreshAll();

    });

    $('#table-second-card').on('click', 'a', function(){
        let card_raw = $(this).data('card');
        let card_suit = suit_char_to_string[card_raw[1]];
        let card_num = card_raw[0];
        if (card_num > 10) {
            card_num = face_num_to_string[card_num];
        } else {
            card_num = card_num.toString();
        }
        let image_file = '../static/assets/cards/' + card_num + '_of_' + card_suit + '.png';
        $('#table-card-2').attr('src', image_file);
        currentCards[3] = card_raw;
        if (currentCards[0] != null) {
            if (currentCards[0].toString() == card_raw.toString()) {
                $('#hand-card-1').attr('src', '../static/assets/cards/back.png');
                currentCards[0] = null;
            }
        }
        if (currentCards[1] != null) {
            if (currentCards[1].toString() == card_raw.toString()) {
                $('#hand-card-2').attr('src', '../static/assets/cards/back.png');
                currentCards[1] = null;
            }
        }
        if (currentCards[2] != null) {
            if (currentCards[2].toString() == card_raw.toString()) {
                console.log(currentCards[2].toString(), card_raw.toString());
                $('#table-card-1').attr('src', '../static/assets/cards/back.png');
                currentCards[2] = null;
            }
        }
        if (currentCards[4] != null) {
            if (currentCards[4].toString() == card_raw.toString()) {
                $('#table-card-3').attr('src', '../static/assets/cards/back.png');
                currentCards[4] = null;
            }
        }
        if (currentCards[5] != null) {
            if (currentCards[5].toString() == card_raw.toString()) {
                $('#table-card-4').attr('src', '../static/assets/cards/back.png');
                currentCards[5] = null;
            }
        }
        if (currentCards[6] != null) {
            if (currentCards[6].toString() == card_raw.toString()) {
                $('#table-card-5').attr('src', '../static/assets/cards/back.png');
                currentCards[6] = null;
            }
        }

        deck = generateDeck();
        deck = deck.filter(function(card) {
            return currentCards.map(String).indexOf(card.toString()) == -1;
        });
        refreshAll();

    });

    $('#table-third-card').on('click', 'a', function(){
        let card_raw = $(this).data('card');
        let card_suit = suit_char_to_string[card_raw[1]];
        let card_num = card_raw[0];
        if (card_num > 10) {
            card_num = face_num_to_string[card_num];
        } else {
            card_num = card_num.toString();
        }
        let image_file = '../static/assets/cards/' + card_num + '_of_' + card_suit + '.png';
        $('#table-card-3').attr('src', image_file);
        currentCards[4] = card_raw;
        if (currentCards[0] != null) {
            if (currentCards[0].toString() == card_raw.toString()) {
                $('#hand-card-1').attr('src', '../static/assets/cards/back.png');
                currentCards[0] = null;
            }
        }
        if (currentCards[1] != null) {
            if (currentCards[1].toString() == card_raw.toString()) {
                $('#hand-card-2').attr('src', '../static/assets/cards/back.png');
                currentCards[1] = null;
            }
        }
        if (currentCards[2] != null) {
            if (currentCards[2].toString() == card_raw.toString()) {
                console.log(currentCards[2].toString(), card_raw.toString());
                $('#table-card-1').attr('src', '../static/assets/cards/back.png');
                currentCards[2] = null;
            }
        }
        if (currentCards[3] != null) {
            if (currentCards[3].toString() == card_raw.toString()) {
                $('#table-card-2').attr('src', '../static/assets/cards/back.png');
                currentCards[3] = null;
            }
        }
        if (currentCards[5] != null) {
            if (currentCards[5].toString() == card_raw.toString()) {
                $('#table-card-4').attr('src', '../static/assets/cards/back.png');
                currentCards[5] = null;
            }
        }
        if (currentCards[6] != null) {
            if (currentCards[6].toString() == card_raw.toString()) {
                $('#table-card-5').attr('src', '../static/assets/cards/back.png');
                currentCards[6] = null;
            }
        }

        deck = generateDeck();
        deck = deck.filter(function(card) {
            return currentCards.map(String).indexOf(card.toString()) == -1;
        });
        refreshAll();

    });

    $('#table-fourth-card').on('click', 'a', function(){
        let card_raw = $(this).data('card');
        let card_suit = suit_char_to_string[card_raw[1]];
        let card_num = card_raw[0];
        if (card_num > 10) {
            card_num = face_num_to_string[card_num];
        } else {
            card_num = card_num.toString();
        }
        let image_file = '../static/assets/cards/' + card_num + '_of_' + card_suit + '.png';
        $('#table-card-4').attr('src', image_file);
        currentCards[5] = card_raw;
        if (currentCards[0] != null) {
            if (currentCards[0].toString() == card_raw.toString()) {
                $('#hand-card-1').attr('src', '../static/assets/cards/back.png');
                currentCards[0] = null;
            }
        }
        if (currentCards[1] != null) {
            if (currentCards[1].toString() == card_raw.toString()) {
                $('#hand-card-2').attr('src', '../static/assets/cards/back.png');
                currentCards[1] = null;
            }
        }
        if (currentCards[2] != null) {
            if (currentCards[2].toString() == card_raw.toString()) {
                console.log(currentCards[2].toString(), card_raw.toString());
                $('#table-card-1').attr('src', '../static/assets/cards/back.png');
                currentCards[2] = null;
            }
        }
        if (currentCards[3] != null) {
            if (currentCards[3].toString() == card_raw.toString()) {
                $('#table-card-2').attr('src', '../static/assets/cards/back.png');
                currentCards[3] = null;
            }
        }
        if (currentCards[4] != null) {
            if (currentCards[4].toString() == card_raw.toString()) {
                $('#table-card-3').attr('src', '../static/assets/cards/back.png');
                currentCards[4] = null;
            }
        }
        if (currentCards[6] != null) {
            if (currentCards[6].toString() == card_raw.toString()) {
                $('#table-card-5').attr('src', '../static/assets/cards/back.png');
                currentCards[6] = null;
            }
        }

        deck = generateDeck();
        deck = deck.filter(function(card) {
            return currentCards.map(String).indexOf(card.toString()) == -1;
        });
        refreshAll();

    });

    $('#table-fifth-card').on('click', 'a', function(){
        let card_raw = $(this).data('card');
        let card_suit = suit_char_to_string[card_raw[1]];
        let card_num = card_raw[0];
        if (card_num > 10) {
            card_num = face_num_to_string[card_num];
        } else {
            card_num = card_num.toString();
        }
        let image_file = '../static/assets/cards/' + card_num + '_of_' + card_suit + '.png';
        $('#table-card-5').attr('src', image_file);
        currentCards[6] = card_raw;
        if (currentCards[0] != null) {
            if (currentCards[0].toString() == card_raw.toString()) {
                $('#hand-card-1').attr('src', '../static/assets/cards/back.png');
                currentCards[0] = null;
            }
        }
        if (currentCards[1] != null) {
            if (currentCards[1].toString() == card_raw.toString()) {
                $('#hand-card-2').attr('src', '../static/assets/cards/back.png');
                currentCards[1] = null;
            }
        }
        if (currentCards[2] != null) {
            if (currentCards[2].toString() == card_raw.toString()) {
                console.log(currentCards[2].toString(), card_raw.toString());
                $('#table-card-1').attr('src', '../static/assets/cards/back.png');
                currentCards[2] = null;
            }
        }
        if (currentCards[3] != null) {
            if (currentCards[3].toString() == card_raw.toString()) {
                $('#table-card-2').attr('src', '../static/assets/cards/back.png');
                currentCards[3] = null;
            }
        }
        if (currentCards[4] != null) {
            if (currentCards[4].toString() == card_raw.toString()) {
                $('#table-card-3').attr('src', '../static/assets/cards/back.png');
                currentCards[4] = null;
            }
        }
        if (currentCards[5] != null) {
            if (currentCards[5].toString() == card_raw.toString()) {
                $('#table-card-4').attr('src', '../static/assets/cards/back.png');
                currentCards[5] = null;
            }
        }

        deck = generateDeck();
        deck = deck.filter(function(card) {
            return currentCards.map(String).indexOf(card.toString()) == -1;
        });
        refreshAll();

    });

    let selectedCards = function() {
      return currentCards.filter(function(s) { return s != null; }).length;
    };

    let checkValidState = function() {
        let notFullFlop = [3,4].indexOf(selectedCards()) != -1;
        if (currentCards[0] == null || currentCards[1] == null) {
            return [false, 'Please fill in your hand.'];
        } else if (notFullFlop) {
            return [false, 'Please fill in the full flop.'];
        }
        return [true, 'Valid state.'];
    };

    $('.compute-button').on('click', function () {
        let [valid, message] = checkValidState();
        if (!valid) {
            $.notify({
                message: message
            },{
                type: 'danger',
                placement: {
                    from: "top",
                    align: "center"
                },
                offset: 200,
                showProgressbar : true,
                timer : 100,
                delay : 3000
            });
        } else {
            if (selectedCards() < 7) {
                $('.compute-results-heading').html("<b style='text-align: center;'>Computation in progress.</b>");
                $('.results-left').html('');
                $('.results-right').html('');
                let cardsToSend = currentCards;
                var sendData = {
                    "hand": [cardsToSend[0], cardsToSend[1]],
                    "board": [],
                    "runs": 1000
                };
                for (let i = 2; i < cardsToSend.length; i++) {
                    if (cardsToSend[i] != null) {
                        sendData['board'].push(cardsToSend[i]);
                    }
                }

                var settings = {
                    "async": true,
                    "crossDomain": true,
                    "url": "/api/hand-chances/",
                    "method": "POST",
                    "headers": {
                        "content-type": "application/json"
                    },
                    "processData": false,
                    "data": JSON.stringify(sendData)
                };

                $.ajax(settings).done(function (response) {
                    probabilities = response;
                    if (probabilities['flop']['total'] > 0) {
                        $('.flop-button').prop('disabled', false);
                    } else {
                        $('.flop-button').prop('disabled', true);
                    }
                    if (probabilities['turn']['total'] > 0) {
                        $('.turn-button').prop('disabled', false);
                    } else {
                        $('.turn-button').prop('disabled', true);
                    }
                    if (probabilities['river']['total'] > 0) {
                        $('.river-button').prop('disabled', false);
                    } else {
                        $('.river-button').prop('disabled', true);
                    }
                    $('.compute-results-heading').html("Done. Select an option to view results.");
                });
            } else {
                $('.compute-results-heading').html("<b style='text-align: center;'>Computation in progress.</b>");
                $('.results-left').html('');
                $('.results-right').html('');
                $('.showdown-cards').html('');
                $('.showdown-title').html('');

                let prob_to_text = {
                    'pair' : 'Pair',
                    'high' : 'High Card',
                    'three': 'Three of A Kind',
                    'four' : 'Four of a Kind',
                    'straight' : 'Straight',
                    'flush' : 'Flush',
                    'straight_flush' : 'Straight Flush',
                    'royal_flush' : 'Royal Flush'
                };

                $('.compute-results-wrapper').fadeOut(fadeTime, function() {
                    let cardsToSend = currentCards;
                    sendData = {
                        "hand": [cardsToSend[0], cardsToSend[1]],
                        "board": [],
                    };
                    for (let i = 2; i < cardsToSend.length; i++) {
                        if (cardsToSend[i] != null) {
                            sendData['board'].push(cardsToSend[i]);
                        }
                    }

                    settings = {
                        "async": true,
                        "crossDomain": true,
                        "url": "/api/showdown/",
                        "method": "POST",
                        "headers": {
                            "content-type": "application/json"
                        },
                        "processData": false,
                        "data": JSON.stringify(sendData)
                    };

                    $.ajax(settings).done(function (response) {
                        probabilities = response;
                        console.log(probabilities);
                            $('.compute-results-heading').html("");
                            if (probabilities[0] == 'high' || probabilities[0] == 'pair' ||
                                probabilities[0] == 'three' || probabilities[0] == 'four') {
                                $('.showdown-title').html("<b>Showdown Results</b>: " +
                                    prob_to_text[probabilities[0]]);
                                for (let card of currentCards) {
                                    if (card[0] == probabilities[1]) {
                                        let card_suit = suit_char_to_string[card[1]];
                                        let card_num = card[0];
                                        if (card_num > 10) {
                                                card_num = face_num_to_string[card_num];
                                        } else {
                                            card_num = card_num.toString();
                                        }
                                        let show_card = document.createElement("img");
                                        let image_file = '../static/assets/cards/' + card_num + '_of_' + card_suit + '.png';
                                        $(show_card).attr('src', image_file);
                                        show_card.className = 'showdown-card showdown-big-card';
                                        $('.showdown-cards').append(show_card);
                                    }

                                }
                            } else if (probabilities[0] == 'two_pair') {
                                $('.showdown-title').html("<b>Showdown Results</b>: Two Pair");
                                let sortedCards = currentCards;
                                sortedCards.sort(function(a, b) {
                                  return a[0] - b[0];
                                });
                                for (let card of sortedCards) {
                                    if (probabilities[1].indexOf(card[0]) != -1) {
                                        let card_suit = suit_char_to_string[card[1]];
                                        let card_num = card[0];
                                        if (card_num > 10) {
                                                card_num = face_num_to_string[card_num];
                                        } else {
                                            card_num = card_num.toString();
                                        }
                                        let show_card = document.createElement("img");
                                        let image_file = '../static/assets/cards/' + card_num + '_of_' + card_suit + '.png';
                                        $(show_card).attr('src', image_file);
                                        show_card.className = 'showdown-card showdown-big-card';
                                        $('.showdown-cards').append(show_card);
                                    }

                                }
                            } else if (probabilities[0] == 'straight') {
                                $('.showdown-title').html("<b>Showdown Results</b>: " +
                                    prob_to_text[probabilities[0]]);
                                let sortedCards = currentCards;
                                sortedCards.sort(function(a, b) {
                                  return a[0] - b[0];
                                });
                                let allCards = [];
                                let seqMap = {};
                                for (let number of probabilities[1]) {
                                    seqMap[number] = -1;
                                }
                                for (let card of sortedCards) {
                                    if (probabilities[1].indexOf(card[0]) != -1) {
                                        if (seqMap[card[0]] == -1) {
                                            seqMap[card[0]] = card[0];
                                            let card_suit = suit_char_to_string[card[1]];
                                            let card_num = card[0];
                                            if (card_num > 10) {
                                                    card_num = face_num_to_string[card_num];
                                            } else {
                                                card_num = card_num.toString();
                                            }
                                            let show_card = document.createElement("img");
                                            let image_file = '../static/assets/cards/' + card_num + '_of_' + card_suit + '.png';
                                            $(show_card).attr('src', image_file);
                                            show_card.className = 'showdown-card showdown-small-card';
                                            $('.showdown-cards').append(show_card);
                                        }
                                    }
                                }
                            } else if (probabilities[0] == 'flush') {
                                $('.showdown-title').html("<b>Showdown Results</b>: " +
                                    prob_to_text[probabilities[0]]);
                                let numCards = 0;
                                let sortedCards = currentCards;
                                sortedCards.sort(function(a, b) {
                                  return b[0] - a[0];
                                });
                                for (let card of sortedCards) {
                                    if (probabilities[1] === card[1]) {
                                        if (numCards < 5) {
                                            numCards += 1;
                                            let card_suit = suit_char_to_string[card[1]];
                                            let card_num = card[0];
                                            if (card_num > 10) {
                                                    card_num = face_num_to_string[card_num];
                                            } else {
                                                card_num = card_num.toString();
                                            }
                                            let show_card = document.createElement("img");
                                            let image_file = '../static/assets/cards/' + card_num + '_of_' + card_suit + '.png';
                                            $(show_card).attr('src', image_file);
                                            show_card.className = 'showdown-card showdown-small-card';
                                            $('.showdown-cards').prepend(show_card);
                                        }
                                    }
                                }
                            } else if (probabilities[0] == 'straight_flush' || probabilities[0] == 'royal_flush') {
                                $('.showdown-title').html("<b>Showdown Results</b>: " +
                                    prob_to_text[probabilities[0]]);
                                let numCards = 0;
                                let sortedCards = currentCards;
                                sortedCards.sort(function(a, b) {
                                  return a[0] - b[0];
                                });
                                let seqMap = {};
                                for (let number of probabilities[1][1]) {
                                    seqMap[number] = -1;
                                }
                                for (let card of sortedCards) {
                                    console.log(probabilities[1][0]);
                                    console.log(probabilities[1][1]);
                                    console.log(card)
                                    if (probabilities[1][0] === card[1] &&
                                        probabilities[1][1].indexOf(card[0]) != -1) {
                                        if (seqMap[card[0]] == -1) {
                                            seqMap[card[0]] = card[0];
                                            let card_suit = suit_char_to_string[card[1]];
                                            let card_num = card[0];
                                            if (card_num > 10) {
                                                    card_num = face_num_to_string[card_num];
                                            } else {
                                                card_num = card_num.toString();
                                            }
                                            let show_card = document.createElement("img");
                                            let image_file = '../static/assets/cards/' + card_num + '_of_' + card_suit + '.png';
                                            $(show_card).attr('src', image_file);
                                            show_card.className = 'showdown-card showdown-small-card';
                                            $('.showdown-cards').append(show_card);
                                        }
                                    }
                                }
                            } else if (probabilities[0] == 'full_house') {
                                $('.showdown-title').html("<b>Showdown Results</b>: Full House");
                                for (let card of currentCards) {
                                    if (card[0] == probabilities[1][0]) {
                                        let card_suit = suit_char_to_string[card[1]];
                                        let card_num = card[0];
                                        if (card_num > 10) {
                                                card_num = face_num_to_string[card_num];
                                        } else {
                                            card_num = card_num.toString();
                                        }
                                        let show_card = document.createElement("img");
                                        let image_file = '../static/assets/cards/' + card_num + '_of_' + card_suit + '.png';
                                        $(show_card).attr('src', image_file);
                                        show_card.className = 'showdown-card showdown-small-card';
                                        $('.showdown-cards').append(show_card);
                                    }
                                }
                                for (let card of currentCards) {
                                    if (card[0] == probabilities[1][1]) {
                                        let card_suit = suit_char_to_string[card[1]];
                                        let card_num = card[0];
                                        if (card_num > 10) {
                                                card_num = face_num_to_string[card_num];
                                        } else {
                                            card_num = card_num.toString();
                                        }
                                        let show_card = document.createElement("img");
                                        let image_file = '../static/assets/cards/' + card_num + '_of_' + card_suit + '.png';
                                        $(show_card).attr('src', image_file);
                                        show_card.className = 'showdown-card showdown-small-card';
                                        $('.showdown-cards').append(show_card);
                                    }
                                }
                            }
                    });
                });
                $('.compute-results-wrapper').fadeIn(fadeTime);
            }
        }
    });

    $('.flop-button').prop('disabled', true);
    $('.turn-button').prop('disabled', true);
    $('.river-button').prop('disabled', true);
    $('.compute-button').prop('disabled', true);
    $('.reset-button').prop('disabled', true);

    let fadeTime = 200;

    $('.flop-button').click(function() {
        $('.showdown-cards').html('');
        $('.showdown-title').html('');
        $('.compute-results-wrapper').fadeOut(fadeTime, function() {
            $('.compute-results-heading').html("<u><b>Flop - </b> probabilities that your best hand will be:</u>");
            let output = `<table id="res-left-tab" style="width:100%"><tr><th>High Card:</th><td>${(probabilities['flop']['high'] * 100).toFixed(2)}%</td></tr><tr><th>Pair</th><td>${(probabilities['flop']['pair'] * 100).toFixed(2)}%</td></tr><tr><th>Two Pair</th><td>${(probabilities['flop']['two_pair'] * 100).toFixed(2)}%</td></tr><tr><th>3 of a Kind</th><td>${(probabilities['flop']['three'] * 100).toFixed(2)}%</td></tr><tr><th>4 of a Kind</th><td>${(probabilities['flop']['four'] * 100).toFixed(2)}%</td></tr></table> `;
            $('.results-left').html(output);
            output = `<table style="width:100%"><tr><th>Flush</th><td>${(probabilities['flop']['flush'] * 100).toFixed(2)}%</td></tr><tr><th>Straight</th><td>${(probabilities['flop']['straight'] * 100).toFixed(2)}%</td></tr><tr><th>Full House</th><td>${(probabilities['flop']['full_house'] * 100).toFixed(2)}%</td></tr><tr><th>Straight Flush</th><td>${(probabilities['flop']['straight_flush'] * 100).toFixed(2)}%</td></tr><tr><th>Royal Flush</th><td>${(probabilities['flop']['royal_flush'] * 100).toFixed(2)}%</td></tr></table>`;
            $('.results-right').html(output);
        });
        $('.compute-results-wrapper').fadeIn(fadeTime);

    });

    $('.turn-button').click(function() {
        $('.showdown-cards').html('');
        $('.showdown-title').html('');
        $('.compute-results-wrapper').fadeOut(fadeTime, function() {
            $('.compute-results-heading').html("<u><b>Turn - </b> probabilities that your best hand will be:</u>");
            let output = `<table id="res-left-tab" style="width:100%"><tr><th>High Card:</th><td>${(probabilities['turn']['high'] * 100).toFixed(2)}%</td></tr><tr><th>Pair</th><td>${(probabilities['turn']['pair'] * 100).toFixed(2)}%</td></tr><tr><th>Two Pair</th><td>${(probabilities['turn']['two_pair'] * 100).toFixed(2)}%</td></tr><tr><th>3 of a Kind</th><td>${(probabilities['turn']['three'] * 100).toFixed(2)}%</td></tr><tr><th>4 of a Kind</th><td>${(probabilities['turn']['four'] * 100).toFixed(2)}%</td></tr></table> `;
            $('.results-left').html(output);
            output = `<table style="width:100%"><tr><th>Flush</th><td>${(probabilities['turn']['flush'] * 100).toFixed(2)}%</td></tr><tr><th>Straight</th><td>${(probabilities['turn']['straight'] * 100).toFixed(2)}%</td></tr><tr><th>Full House</th><td>${(probabilities['turn']['full_house'] * 100).toFixed(2)}%</td></tr><tr><th>Straight Flush</th><td>${(probabilities['turn']['straight_flush'] * 100).toFixed(2)}%</td></tr><tr><th>Royal Flush</th><td>${(probabilities['turn']['royal_flush'] * 100).toFixed(2)}%</td></tr></table>`;
            $('.results-right').html(output);
        });
        $('.compute-results-wrapper').fadeIn(fadeTime);
    });

    $('.river-button').click(function() {
        $('.showdown-cards').html('');
        $('.showdown-title').html('');
        $('.compute-results-wrapper').fadeOut(fadeTime, function() {
            $('.compute-results-heading').html("<u><b>River - </b> probabilities that your best hand will be:</u>");
            let output = `<table id="res-left-tab" style="width:100%"><tr><th>High Card:</th><td>${(probabilities['river']['high'] * 100).toFixed(2)}%</td></tr><tr><th>Pair</th><td>${(probabilities['river']['pair'] * 100).toFixed(2)}%</td></tr><tr><th>Two Pair</th><td>${(probabilities['river']['two_pair'] * 100).toFixed(2)}%</td></tr><tr><th>3 of a Kind</th><td>${(probabilities['river']['three'] * 100).toFixed(2)}%</td></tr><tr><th>4 of a Kind</th><td>${(probabilities['river']['four'] * 100).toFixed(2)}%</td></tr></table> `;
            $('.results-left').html(output);
            output = `<table style="width:100%"><tr><th>Flush</th><td>${(probabilities['river']['flush'] * 100).toFixed(2)}%</td></tr><tr><th>Straight</th><td>${(probabilities['river']['straight'] * 100).toFixed(2)}%</td></tr><tr><th>Full House</th><td>${(probabilities['river']['full_house'] * 100).toFixed(2)}%</td></tr><tr><th>Straight Flush</th><td>${(probabilities['river']['straight_flush'] * 100).toFixed(2)}%</td></tr><tr><th>Royal Flush</th><td>${(probabilities['river']['royal_flush'] * 100).toFixed(2)}%</td></tr></table>`;
            $('.results-right').html(output);
        });
        $('.compute-results-wrapper').fadeIn(fadeTime);
    });

    $('.reset-button').click(function() {
        $('.cards-container').fadeOut(200, function() {
            resetGame();
        });
        $('.cards-container').fadeIn(250);

    });




</script>
</html>